(this["webpackJsonpra-router-2-front"]=this["webpackJsonpra-router-2-front"]||[]).push([[0],{26:function(t,e,n){},27:function(t,e,n){},35:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n.n(c),a=n(20),r=n.n(a),o=(n(26),n(27),n(7)),i=n(2),j=n(8),d=n(9),b=n.n(d),l=n(11),u=n(1),p={minute:"2-digit",hour:"2-digit",day:"numeric",month:"long",year:"numeric"};function h(t){return t.id?Object(u.jsxs)("div",{className:"post-container",children:[Object(u.jsx)("pre",{className:"post-content",children:t.content}),Object(u.jsx)("div",{className:"post-date",children:new Date(t.created).toLocaleDateString("ru-RU",p)})]}):Object(u.jsx)("div",{className:"post-container",children:"Post not found."})}var O=n(12),m=Object(c.createContext)([]),x=m;function f(t){var e=Object(c.useState)(localStorage.getItem("posts")?JSON.parse(localStorage.getItem("posts")):[]),n=Object(O.a)(e,2),s=n[0],a=n[1];return Object(c.useEffect)((function(){localStorage.setItem("posts",JSON.stringify(s))}),[s]),Object(u.jsx)(m.Provider,{value:{posts:s,setPosts:a},children:t.children})}function v(){var t=Object(c.useContext)(x),e=t.posts,n=t.setPosts;return Object(c.useEffect)((function(){(function(){var t=Object(l.a)(b.a.mark((function t(){var e,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://deep-ancient-ocean.herokuapp.com/posts");case 2:if(!(e=t.sent).ok){t.next=16;break}return t.prev=4,t.next=7,e.json();case 7:c=t.sent,n(c),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error parsing server response: probably not a JSON");case 14:t.next=17;break;case 16:console.error(e.statusText+", status: "+e.status);case 17:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}})()()}),[n]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"posts-container",children:[e.map((function(t){return Object(u.jsx)(o.b,{className:"link",to:"/posts/".concat(t.id),children:Object(u.jsx)(h,Object(j.a)({},t))},t.id)})),Object(u.jsx)(o.b,{className:"link nav-link",to:"/posts/new",children:Object(u.jsx)("div",{className:"post-action-btn btn-edit",children:"New post"})})]})})}var N=n(14);function g(t){var e=Object(c.useState)({id:t.id||0,content:t.content||""}),n=Object(O.a)(e,2),s=n[0],a=n[1],r=function(){var e=Object(l.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("https://deep-ancient-ocean.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:e.sent.ok&&t.history.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"post-edit-wrapper",children:Object(u.jsxs)("form",{className:"post-edit-form",onSubmit:r,children:[Object(u.jsx)("textarea",{className:"post-edit-content",name:"content",placeholder:"Post content",autoFocus:!0,value:s.content,onChange:function(t){a(Object(j.a)(Object(j.a)({},s),{},Object(N.a)({},t.target.name,t.target.value)))}}),Object(u.jsx)("button",{className:"post-edit-submit-btn post-action-btn btn-edit",type:"submit",children:t.id?"Submit":"Add"}),Object(u.jsx)(o.b,{to:"/",className:"link",children:Object(u.jsx)("div",{className:"post-edit-close",children:"\u2717"})})]})})}function k(t){var e=Object(c.useState)(!1),n=Object(O.a)(e,2),s=n[0],a=n[1],r=Object(c.useContext)(x).posts.find((function(e){return e.id===+t.match.params.id}));if(!r)return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{}),Object(u.jsx)("div",{className:"edit-delete-container",children:Object(u.jsx)(o.b,{to:"/",className:"link",children:Object(u.jsx)("div",{className:"post-action-btn btn-edit single-btn",children:"Back"})})})]});var i=function(){var e=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://deep-ancient-ocean.herokuapp.com/posts/"+r.id,{method:"DELETE"});case 2:e.sent.ok&&t.history.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"post-actions-wrapper",children:[Object(u.jsx)(h,Object(j.a)({},r)),s?Object(u.jsx)(g,Object(j.a)(Object(j.a)({},r),t)):Object(u.jsxs)("div",{className:"post-actions-container",children:[Object(u.jsx)(o.b,{to:"/",className:"link",children:Object(u.jsx)("div",{className:"post-action-btn btn-edit",children:"Back"})}),Object(u.jsxs)("div",{className:"edit-delete-container",children:[Object(u.jsx)("div",{className:"post-action-btn btn-edit",onClick:function(){a(!s)},children:"Edit"}),Object(u.jsx)("div",{className:"post-action-btn btn-delete",onClick:i,children:"Delete"})]})]})]})}var S=function(){return Object(u.jsx)(o.a,{basename:"/ra-router-2-front",children:Object(u.jsx)(f,{children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/posts/new",component:g}),Object(u.jsx)(i.a,{path:"/posts/:id",component:k}),Object(u.jsx)(i.a,{path:"/",component:v}),Object(u.jsx)(i.a,{path:"*",component:v})]})})})},w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),c(t),s(t),a(t),r(t)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root")),w()}},[[35,1,2]]]);
//# sourceMappingURL=main.9ab48571.chunk.js.map